!function(){var e,t,s,o,r=window.Zepto,i=r(document.body),c=window.player,a=null,l=c.audioManager;function g(o){clearInterval(a),o=+o,a=setInterval(function(){o+=2,r(".song-img .img-box").attr("data-deg",o),r(".song-img .img-box").css({transform:"rotateZ("+o%360+"deg)"})},60)}o="../mock/data.json",r.ajax({url:o,type:"GET",success:function(o){r("body").on("change:play",function(o,t,n){c.render(e[t]),l.getAudio(e[t].audio),c.progress.renderAllTime(e[t].duration),c.progress.updata(0),"play"==l.status||n?(l.play(),g(0),c.progress.start()):(l.pause(),clearInterval(a),r(".song-img .img-box").attr("data-deg",0),r(".song-img .img-box").css({transform:"rotateZ(0deg)"}))}),r(".control .prev").on("click",function(){var o=s.prev();r("body").trigger("change:play",o)}),r(".control .play").on("click",function(){"pause"==l.status?(l.play(),g(r(".img-box").attr("data-deg")),c.progress.start()):(l.pause(),clearInterval(a),c.progress.stop()),r(".control .play").toggleClass("playing")}),r(".control .next").on("click",function(){var o=s.next();r("body").trigger("change:play",o)}),r(".control .list").on("click",function(){c.playList.show(s)}),function(){var o=i.find(".slider"),t=i.find(".pro-time").offset(),r=t.left,a=t.width;o.on("touchstart",function(){c.progress.stop()}).on("touchmove",function(o){var t=(o.changedTouches[0].clientX-r)/a;(1<t||t<0)&&(t=0),c.progress.updata(t)}).on("touchend",function(o){var t=(o.changedTouches[0].clientX-r)/a;(1<t||t<0)&&(t=0);var n=e[s.index].duration*t;l.jumpToplay(n),c.progress.start(t),i.find(".play").addClass("playing")})}(),c.render(o[0]),t=(e=o).length,l.getAudio(o[0].audio),s=new c.controlIndex(t),c.progress.renderAllTime(e[0].duration),c.playList.renderList(o)},error:function(o){console.log(o.status,o.statusText)}})}();